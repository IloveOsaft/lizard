
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://lizard.dev/module_reference/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>Module Reference - Lizard</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:""}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Lizard" class="md-header__button md-logo" aria-label="Lizard" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lizard
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Module Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zauberzeug/lizard/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Lizard" class="md-nav__button md-logo" aria-label="Lizard" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Lizard
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zauberzeug/lizard/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../language/" class="md-nav__link">
        The Lizard Language
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Module Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Module Reference
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core" class="md-nav__link">
    Core
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bluetooth" class="md-nav__link">
    Bluetooth
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    Input
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#can-interface" class="md-nav__link">
    CAN interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-interface" class="md-nav__link">
    Serial interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linear-motor" class="md-nav__link">
    Linear motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odrive-motor" class="md-nav__link">
    ODrive Motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odrive-wheels" class="md-nav__link">
    ODrive Wheels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rmd-motor" class="md-nav__link">
    RMD Motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roboclaw" class="md-nav__link">
    RoboClaw
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roboclaw-motor" class="md-nav__link">
    RoboClaw Motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expander" class="md-nav__link">
    Expander
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxy" class="md-nav__link">
    Proxy
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../machine_safety/" class="md-nav__link">
        Machine Safety
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Tools
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core" class="md-nav__link">
    Core
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bluetooth" class="md-nav__link">
    Bluetooth
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    Input
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#can-interface" class="md-nav__link">
    CAN interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-interface" class="md-nav__link">
    Serial interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linear-motor" class="md-nav__link">
    Linear motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odrive-motor" class="md-nav__link">
    ODrive Motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odrive-wheels" class="md-nav__link">
    ODrive Wheels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rmd-motor" class="md-nav__link">
    RMD Motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roboclaw" class="md-nav__link">
    RoboClaw
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roboclaw-motor" class="md-nav__link">
    RoboClaw Motor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expander" class="md-nav__link">
    Expander
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxy" class="md-nav__link">
    Proxy
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/zauberzeug/lizard/edit/main/docs/module_reference.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="module-reference">Module Reference<a class="headerlink" href="#module-reference" title="Permanent link">&para;</a></h1>
<p>All Lizard modules have the following methods in common.</p>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>module.mute()</code></td>
<td>Turn output off</td>
</tr>
<tr>
<td><code>module.unmute()</code></td>
<td>Turn output on</td>
</tr>
<tr>
<td><code>module.shadow()</code></td>
<td>Send all method calls also to another module</td>
</tr>
<tr>
<td><code>module.broadcast()</code></td>
<td>Regularly send properties to another microcontroller (for internal use)</td>
</tr>
</tbody>
</table>
<p>Shadows are useful if multiple modules should behave exactly the same, e.g. two actuators that should always move synchronously.</p>
<p>The <code>broadcast</code> method is used internally with <a href="#expander">port expanders</a>.</p>
<h2 id="core">Core<a class="headerlink" href="#core" title="Permanent link">&para;</a></h2>
<p>The core module encapsulates various properties and methods that are related to the microcontroller itself.
It is automatically created right after the boot sequence.</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>core.debug</code></td>
<td>Whether to output debug information to the command line</td>
<td><code>bool</code></td>
</tr>
<tr>
<td><code>core.millis</code></td>
<td>Time since booting the microcontroller (ms)</td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>core.heap</code></td>
<td>Free heap memory (bytes)</td>
<td><code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>core.restart()</code></td>
<td>Restart the microcontroller</td>
<td></td>
</tr>
<tr>
<td><code>core.info()</code></td>
<td>Show lizard version and compile time</td>
<td></td>
</tr>
<tr>
<td><code>core.print(...)</code></td>
<td>Print arbitrary arguments to the command line</td>
<td>arbitrary</td>
</tr>
<tr>
<td><code>core.output(format)</code></td>
<td>Define the output format</td>
<td><code>str</code></td>
</tr>
</tbody>
</table>
<p>The output <code>format</code> is a string with multiple space-separated elements of the pattern <code>&lt;module&gt;.&lt;property&gt;[:&lt;precision&gt;]</code>.
The <code>precision</code> is an optional integer specifying the number of decimal places for a floating point number.
For example, the format <code>"core.millis input.level motor.position:3"</code> might yield an output like <code>"92456 1 12.789</code>.</p>
<h2 id="bluetooth">Bluetooth<a class="headerlink" href="#bluetooth" title="Permanent link">&para;</a></h2>
<p>Lizard can receive messages via Bluetooth Low Energy.
Simply create a Bluetooth module with a device name of your choice.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bluetooth = Bluetooth(device_name)</code></td>
<td>initialize bluetooth with advertised <code>device_name</code></td>
<td><code>str</code></td>
</tr>
</tbody>
</table>
<p>Lizard will offer a service 23014CCC-4677-4864-B4C1-8F772B373FAC and a characteristic 37107598-7030-46D3-B688-E3664C1712F0 that allows writing Lizard statements like on the command line.</p>
<h2 id="input">Input<a class="headerlink" href="#input" title="Permanent link">&para;</a></h2>
<p>The input module is associated with a digital input pin that is be connected to a pushbutton, sensor or other input signal.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>input = Input(pin)</code></td>
<td><code>pin</code> is the corresponding GPIO number</td>
<td><code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>input.level</code></td>
<td>Current signal level (0 or 1)</td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>input.change</code></td>
<td>Level change since last cycle (-1..1)</td>
<td><code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>input.get()</code></td>
<td>Output the current level</td>
</tr>
<tr>
<td><code>input.pullup()</code></td>
<td>Add an internal pull-up resistor</td>
</tr>
<tr>
<td><code>input.pulldown()</code></td>
<td>Add an internal pull-down resistor</td>
</tr>
<tr>
<td><code>input.pulloff()</code></td>
<td>Remove internal pull resistor</td>
</tr>
</tbody>
</table>
<h2 id="output">Output<a class="headerlink" href="#output" title="Permanent link">&para;</a></h2>
<p>The output module is associated with a digital output pin that is connected to an LED, actuator or other output signal.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>output = Output(pin)</code></td>
<td><code>pin</code> is the corresponding GPIO number</td>
<td><code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>output.on()</code></td>
<td>Set the output pin high</td>
</tr>
<tr>
<td><code>output.off()</code></td>
<td>Set the output pin low</td>
</tr>
</tbody>
</table>
<h2 id="can-interface">CAN interface<a class="headerlink" href="#can-interface" title="Permanent link">&para;</a></h2>
<p>The CAN module allows communicating with peripherals on the specified CAN bus.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>can = Can(rx, tx, baud)</code></td>
<td>RX/TX pins and baud rate</td>
<td><code>int</code>, <code>int</code>, <code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>can.send(node_id, d0, d1, d2, d3, d4, d5, d6, d7)</code></td>
<td>Send a frame with 8 data bytes</td>
<td>9x <code>int</code></td>
</tr>
</tbody>
</table>
<h2 id="serial-interface">Serial interface<a class="headerlink" href="#serial-interface" title="Permanent link">&para;</a></h2>
<p>The serial module allows communicating with peripherals via the specified connection.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>serial = Serial(rx, tx, baud, num)</code></td>
<td>RX/TX pins, baud rate, UART number</td>
<td>4x <code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>serial.send(b0, b1, b2, ...)</code></td>
<td>Send a number of bytes</td>
<td><code>int</code>s</td>
</tr>
<tr>
<td><code>serial.read()</code></td>
<td>Read and output current buffer</td>
<td></td>
</tr>
</tbody>
</table>
<p>This module might be used by other modules that communicate with peripherals via serial.
You can, however, unmute the serial module to have incoming messages printed to the command line instead of keeping them buffered for other modules.</p>
<h2 id="linear-motor">Linear motor<a class="headerlink" href="#linear-motor" title="Permanent link">&para;</a></h2>
<p>This module controls a linear actuator via two output pins (move in, move out) and two input pins reading two limit switches (end in, end out).</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor = LinearMotor(move_in, move_out, end_in, end_out)</code></td>
<td>motor control pins and limit switches</td>
<td>4x <code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor.in()</code></td>
<td>Move in</td>
</tr>
<tr>
<td><code>motor.out()</code></td>
<td>Move out</td>
</tr>
<tr>
<td><code>motor.stop()</code></td>
<td>Stop motor</td>
</tr>
</tbody>
</table>
<h2 id="odrive-motor">ODrive Motor<a class="headerlink" href="#odrive-motor" title="Permanent link">&para;</a></h2>
<p>The ODrive motor module controls a motor using an <a href="https://odriverobotics.com/">ODrive motor controller</a>.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor = ODriveMotor(can, can_id)</code></td>
<td>CAN module and node ID</td>
<td>CAN module, <code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor.position</code></td>
<td>Motor position (meters)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>motor.tick_offset</code></td>
<td>Encoder tick offset</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>motor.m_per_tick</code></td>
<td>Meters per encoder tick</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>motor.reversed</code></td>
<td>Reverse motor direction</td>
<td><code>bool</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor.zero()</code></td>
<td>Set current position as zero position</td>
<td></td>
</tr>
<tr>
<td><code>motor.power(torque)</code></td>
<td>Move with given <code>torque</code></td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>motor.speed(speed)</code></td>
<td>Move with given <code>speed</code> (m/s)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>motor.off()</code></td>
<td>Turn motor off (idle state)</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="odrive-wheels">ODrive Wheels<a class="headerlink" href="#odrive-wheels" title="Permanent link">&para;</a></h2>
<p>The ODrive wheels module combines to ODrive motors and provides odometry and steering for differential wheeled robots.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wheels = ODriveWheels(left_motor, left_motor)</code></td>
<td>Two ODrive motor modules</td>
<td>two ODrive motor modules</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wheels.width</code></td>
<td>wheel distance (m)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>wheels.linear_speed</code></td>
<td>Forward speed (m/s)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>wheels.angular_speed</code></td>
<td>Turning speed (rad/s)</td>
<td><code>float</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wheels.power(left, right)</code></td>
<td>Move with torque per wheel</td>
<td><code>float</code>, <code>float</code></td>
</tr>
<tr>
<td><code>wheels.speed(linear, angular)</code></td>
<td>Move with <code>linear</code>/<code>angular</code> speed (m/s, rad/s)</td>
<td><code>float</code>, <code>float</code></td>
</tr>
<tr>
<td><code>wheels.off()</code></td>
<td>Turn both motors off (idle state)</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="rmd-motor">RMD Motor<a class="headerlink" href="#rmd-motor" title="Permanent link">&para;</a></h2>
<p>The RMD motor module controls a <a href="http://www.gyems.cn/">Gyems</a> RMD motor via CAN.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rmd = RmdMotor(can, motor_id)</code></td>
<td>CAN module and motor ID (1..8)</td>
<td>CAN module, <code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rmd.position</code></td>
<td>Multi-turn motor position (deg)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.ratio</code></td>
<td>Transmission from motor to shaft (default: 6)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.torque</code></td>
<td>Current torque</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.speed</code></td>
<td>Current speed (deg/s)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.can_age</code></td>
<td>Time since last CAN message from motor (s)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.map_distance</code></td>
<td>Distance to leading motor (deg)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.map_speed</code></td>
<td>Computed speed to follow leading motor (deg/s)</td>
<td><code>float</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rmd.power(torque)</code></td>
<td>Move with given <code>torque</code> (-32..32 A)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.speed(speed)</code></td>
<td>Move with given <code>speed</code> (deg/s)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.position(pos)</code></td>
<td>Move to and hold at <code>pos</code> (deg)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>rmd.position(pos, speed)</code></td>
<td>Move to and hold at <code>pos</code> (deg) with max. <code>speed</code> (deg/s)</td>
<td><code>float</code>, <code>float</code></td>
</tr>
<tr>
<td><code>rmd.stop()</code></td>
<td>Stop motor (but keep operating state)</td>
<td></td>
</tr>
<tr>
<td><code>rmd.resume()</code></td>
<td>Resume motor (continue in state from before stop command)</td>
<td></td>
</tr>
<tr>
<td><code>rmd.off()</code></td>
<td>Turn motor off (clear operating state)</td>
<td></td>
</tr>
<tr>
<td><code>rmd.hold()</code></td>
<td>Hold current position</td>
<td></td>
</tr>
<tr>
<td><code>rmd.map(leader)</code></td>
<td>Map another RMD with current offset and scale 1</td>
<td>RMD module</td>
</tr>
<tr>
<td><code>rmd.map(leader, m)</code></td>
<td>Map another RMD with current offset and scale <code>m</code></td>
<td>RMD module, 1x <code>float</code></td>
</tr>
<tr>
<td><code>rmd.map(leader, m, n)</code></td>
<td>Map another RMD with offset <code>n</code> and scale <code>m</code></td>
<td>RMD module, 2x <code>float</code></td>
</tr>
<tr>
<td><code>rmd.map(leader, a, b, c, d)</code></td>
<td>Map another RMD from interval (a, b) to (c, d)</td>
<td>RMD module, 4x <code>float</code></td>
</tr>
<tr>
<td><code>rmd.unmap()</code></td>
<td>Stop mapping</td>
<td></td>
</tr>
<tr>
<td><code>rmd.get_health()</code></td>
<td>Print temperature (C), voltage (V) and error code</td>
<td></td>
</tr>
<tr>
<td><code>rmd.get_pid()</code></td>
<td>Print PID parameters Kp/Ki for position/speed/torque loop</td>
<td></td>
</tr>
<tr>
<td><code>rmd.get_acceleration()</code></td>
<td>Print acceleration setting</td>
<td></td>
</tr>
<tr>
<td><code>rmd.set_acceleration()</code></td>
<td>Set acceleration</td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>rmd.clear_errors()</code></td>
<td>Clear motor error</td>
<td></td>
</tr>
<tr>
<td><code>rmd.zero()</code></td>
<td>Write position to ROM as zero position (see below)</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>The zero command</strong></p>
<p>The <code>zero()</code> method should be used with care!
In contrast to other commands it blocks the main loop for up to 200 ms and requires restarting the motor to take effect.
Furthermore, multiple writes will affect the chip life, thus it is not recommended to use it frequently.</p>
<p><strong>Mapping movement to another RMD motor</strong></p>
<p>When mapping the movement of a following motor to a leading motor, the follower uses velocity control to follow the leader.
The follower's target speed is always computed such that it catches up within one loop cycle.
When the following motor reaches its target position and the computed speed is below 1 degree per second, the follower switches to position control and holds the current position.</p>
<p>The mapping interval (<code>a</code>, <code>b</code>) should not be empty, because the target position of the following motor would be undefined.</p>
<p>Any method call (except the <code>map()</code> method) will unmap the motor.
This avoids extreme position jumps and inconsistencies caused by multiple control loops running at the same time.</p>
<h2 id="roboclaw">RoboClaw<a class="headerlink" href="#roboclaw" title="Permanent link">&para;</a></h2>
<p>The RoboClaw module serves as building block for more complex modules like RoboClaw motors.
It communicates with a <a href="https://www.basicmicro.com/">Basicmicro</a> RoboClaw motor driver via serial.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>claw = RoboClaw(serial, address)</code></td>
<td>Serial module and address</td>
<td>Serial module, <code>int</code></td>
</tr>
</tbody>
</table>
<h2 id="roboclaw-motor">RoboClaw Motor<a class="headerlink" href="#roboclaw-motor" title="Permanent link">&para;</a></h2>
<p>The RoboClaw motor module controls a motor using a RoboClaw module.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor = RoboClawMotor(claw, motor_id)</code></td>
<td>RoboClaw module and motor ID (1..2)</td>
<td>RoboClaw module, <code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor.position</code></td>
<td>Multi-turn motor position (encoder ticks)</td>
<td><code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>motor.power(torque)</code></td>
<td>Move with given <code>torque</code> (-1..1)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>motor.speed(speed)</code></td>
<td>Move with given <code>speed</code> (-32767..32767)</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>motor.zero()</code></td>
<td>Store position as zero position</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="expander">Expander<a class="headerlink" href="#expander" title="Permanent link">&para;</a></h2>
<p>The expander module allows communication with another microcontroller connected via <a href="#serial-interface">serial</a>.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>expander = Expander(serial, boot, enable)</code></td>
<td>Serial module and boot/enable pins</td>
<td>Serial module, 2x <code>int</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>expander.run(command)</code></td>
<td>Run any <code>command</code> on the other microcontroller</td>
<td><code>string</code></td>
</tr>
</tbody>
</table>
<p>Note that the expander forwards all other method calls to the remote core module, e.g. <code>expander.info()</code>.</p>
<h2 id="proxy">Proxy<a class="headerlink" href="#proxy" title="Permanent link">&para;</a></h2>
<p>-- <em>This module is mainly for internal use with the expander module.</em> --</p>
<p>Proxy modules serve as handles for remote modules running on another microcontroller.
Declaring a module <code>x = Proxy()</code> will allow formulating rules like <code>when x.level == 0 then ...</code>.
It will receive property values from a remote module with the same name <code>x</code>, e.g. an input signal level.
Note that the remote module has to have turned on broadcasting: <code>x.broadcast()</code>.</p>
<table>
<thead>
<tr>
<th>Constructor</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>module = Proxy()</code></td>
</tr>
</tbody>
</table>
<p>Note that the proxy module forwards all method calls to the remote module.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../examples/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Examples" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Examples
            </div>
          </div>
        </a>
      
      
        
        <a href="../machine_safety/" class="md-footer__link md-footer__link--next" aria-label="Next: Machine Safety" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Machine Safety
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>